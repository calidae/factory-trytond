name: Python package

on:
  push:
    tags: '*'

jobs:

  pypi-publishing:

    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Install twine and 
      run: |
        python3 -m pip install twine
        python3 -m pip install wheel
    - name: Prepare dist file
      run: python3 setup.py sdist bdist_wheel
    - name: Publish dist on PyPI
    #   run: python3 -m twine upload --config-file .pypirc --repository testpypi dist/*
      run: python3 -m twine upload --config-file .pypirc dist/*
